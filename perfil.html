<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ferretería El Señor de Muruhuay</title>
  <!-- Aquí se incluye el CSS -->
  <link rel="stylesheet" href="StyleMain.css" />
</head>
<body>
  <style>
    /* Fondo elegante para la presentación */
   .presentacion-fondo {
      background-image: url('https://www.comandoconstrucciones.com/wp-content/uploads/2024/01/Ferreteria-1.jpg');
      background-size: cover;
      background-position: center;
      padding: 0 10px;

      display: flex;
      justify-content: center;
      align-items: center;

      min-height: 100vh;
    }

    .presentacion-elegante {
      max-width: 1200px;
      width: 90%;
      background: #ffffffcc;
      backdrop-filter: blur(6px);
      padding: 30px 40px;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #333;
      margin: auto;
    }

    /* Caja elegante con sombra y difuminado */
    .presentacion-elegante {
      max-width: 900px;
      margin: auto;
      background: #ffffffcc;
      backdrop-filter: blur(6px);
      padding: 30px 40px;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #333;
    }

    .presentacion-elegante h1 {
      font-size: 2.5em;
      margin-bottom: 20px;
      color: #1e3a8a;
      text-align: center;
    }

    .presentacion-elegante p {
      font-size: 1.2em;
      line-height: 1.6;
      margin-bottom: 16px;
      text-align: justify;
    }

    .presentacion-elegante::before {
      content: "";
      display: block;
      height: 6px;
      width: 80px;
      margin: 0 auto 20px auto;
      background: linear-gradient(90deg, #1e3a8a, #2563eb);
      border-radius: 3px;
    }

    /* Modal Popup */
    #welcomeModal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
    }
    #welcomeModal > div {
      background: white;
      padding: 20px 30px;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      max-width: 400px;
      text-align: center;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    #welcomeModal h2 {
      color: #1e3a8a;
      margin-bottom: 15px;
    }
    #closeModalBtn {
      background: #1e3a8a;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
    }
  </style>
</head>
<body>
  <!--  ========Barra de navegación==== -->
  <div class="contenedor">
    <div class="navegacion">
      <ul>
        
        <li>
          <a href="#">
            <span class="icon"><ion-icon name="build-outline"></ion-icon></span>
            <span class="titulo">El Señor de Muruhuay</span>
          </a>
        </li>
        <li>
          <a href="index.html">
            <span class="icon"><ion-icon name="home-outline"></ion-icon></span>
            <span class="titulo">Inicio</span>
          </a>
        </li>
        <li>
          <a href="productos.html">
            <span class="icon"><ion-icon name="cube-outline"></ion-icon></span>
            <span class="titulo">Productos</span>
          </a>
        </li>
        <li>
          <a href="carrito.html">
            <span class="icon"><ion-icon name="cart-outline"></ion-icon></span>
            <span class="titulo">Carrito</span>
          </a>
        </li>
        <li>
          <a href="perfil.html">
            <span class="icon"><ion-icon name="person-circle-outline"></ion-icon></span>
            <span class="titulo">Perfil</span>
          </a>
        </li>
        <li>
          <a href="soporte.html">
            <span class="icon"><ion-icon name="help-circle-outline"></ion-icon></span>
            <span class="titulo">Soporte</span>
          </a>
        </li>
        <li>
          <a href="salir.html">
            <span class="icon"><ion-icon name="log-out-outline"></ion-icon></span>
            <span class="titulo">Salir</span>
          </a>
        </li>
      </ul>
    </div>
    <!-- ====Pantalla Principal=== -->
    <div class="principal">
      <div class="topbar">
        <div class="toggle">
          <ion-icon name="menu-outline"></ion-icon>
        </div>

        <div class="buscador">
          <label>
            <input type="text" placeholder="Buscar" />
            <ion-icon name="search-outline"></ion-icon>
          </label>
        </div>

        <div class="usuario">
          <img src="../img/UserExample.jpg" alt="" />
        </div>
      </div>
      <!-- ======= Área Login con Fondo ======= -->
      <div class="presentacion-fondo">
        <div class="presentacion-elegante">
          <h1 id="formTitle">Accede a tu cuenta</h1>
          

          <!-- Botones para cambiar entre Login y Registro -->
          <div style="text-align:center; margin-bottom: 20px;">
            <button type="button" id="loginBtn" style="background:#1e3a8a; color:white; border:none; padding:8px 20px; border-radius:10px; cursor:pointer; margin-right:10px;">Login</button>
            <button type="button" id="registerBtn" style="background:#2563eb; color:white; border:none; padding:8px 20px; border-radius:10px; cursor:pointer;">Registro</button>
          </div>

          <form id="userForm" action="#" method="post">
            <!-- Campos comunes -->
            <label for="correo">Correo Electrónico:</label><br />
            <input type="email" id="correo" name="correo" required placeholder="ejemplo@correo.com" style="width: 100%; padding: 8px; margin-bottom: 12px; border-radius: 8px; border: 1px solid #ccc;" /><br />

            <label for="password">Contraseña:</label><br />
            <input type="password" id="password" name="password" required placeholder="********" style="width: 100%; padding: 8px; margin-bottom: 20px; border-radius: 8px; border: 1px solid #ccc;" /><br />

            <!-- Campos exclusivos de registro, inicialmente ocultos -->
            <div id="registerFields" style="display:none;">
              <label for="nombre">Nombre:</label><br />
              <input type="text" id="nombre" name="nombre" style="width: 100%; padding: 8px; margin-bottom: 12px; border-radius: 8px; border: 1px solid #ccc;" /><br />

              <label for="numero">Número:</label><br />
              <input type="tel" id="numero" name="numero" pattern="[0-9]{7,15}" placeholder="Ej: 992966262" style="width: 100%; padding: 8px; margin-bottom: 12px; border-radius: 8px; border: 1px solid #ccc;" /><br />

              <label for="direccion">Dirección:</label><br />
              <input type="text" id="direccion" name="direccion" style="width: 100%; padding: 8px; margin-bottom: 20px; border-radius: 8px; border: 1px solid #ccc;" /><br />
            </div>

            <button type="submit" style="background: #1e3a8a; color: white; padding: 12px 20px; border: none; border-radius: 10px; cursor: pointer; font-size: 1em; width: 100%;">Entrar</button>
          </form>

          <p id="message" style="color:red; text-align:center; margin-top:15px;"></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Popup -->
  <div id="welcomeModal">
    <div>
      <h2 id="welcomeText"></h2>
      <button id="closeModalBtn">Cerrar</button>
    </div>
  </div>

  <!-- Ionicons -->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

  <script>
    const loginBtn = document.getElementById('loginBtn');
    const registerBtn = document.getElementById('registerBtn');
    const registerFields = document.getElementById('registerFields');
    const formTitle = document.getElementById('formTitle');
    const userForm = document.getElementById('userForm');
    const message = document.getElementById('message');

    const welcomeModal = document.getElementById('welcomeModal');
    const welcomeText = document.getElementById('welcomeText');
    const closeModalBtn = document.getElementById('closeModalBtn');

    // Cambiar a modo Login
    loginBtn.onclick = () => {
      formTitle.textContent = 'Accede a tu cuenta';
      registerFields.style.display = 'none';

      // Campos requeridos para registro desactivados
      document.getElementById('nombre').required = false;
      document.getElementById('numero').required = false;
      document.getElementById('direccion').required = false;

      loginBtn.style.background = '#1e3a8a';
      registerBtn.style.background = '#2563eb';
      message.textContent = '';
      userForm.reset();
    };

    // Cambiar a modo Registro
    registerBtn.onclick = () => {
      formTitle.textContent = 'Regístrate';
      registerFields.style.display = 'block';

      // Campos requeridos para registro activados
      document.getElementById('nombre').required = true;
      document.getElementById('numero').required = true;
      document.getElementById('direccion').required = true;

      loginBtn.style.background = '#2563eb';
      registerBtn.style.background = '#1e3a8a';
      message.textContent = '';
      userForm.reset();
    };

    // Simulación simple de login y registro usando localStorage
    userForm.onsubmit = (e) => {
      e.preventDefault();
      message.style.color = 'red';

      const correo = userForm.correo.value.trim();
      const password = userForm.password.value.trim();

      if(registerFields.style.display === 'block') {
        // Registro
        const nombre = userForm.nombre.value.trim();
        const numero = userForm.numero.value.trim();
        const direccion = userForm.direccion.value.trim();

        if(!nombre || !numero || !direccion || !correo || !password) {
          message.textContent = 'Por favor completa todos los campos.';
          return;
        }

        if(localStorage.getItem(correo)) {
          message.textContent = 'Este correo ya está registrado.';
          return;
        }

        // Guardar usuario en localStorage (simulado)
        const userData = { nombre, numero, direccion, correo, password };
        localStorage.setItem(correo, JSON.stringify(userData));
        
        // Mostrar popup registro exitoso
        welcomeText.textContent = 'Usuario registrado exitosamente.';
        welcomeModal.style.display = 'flex';

        message.textContent = '';
        userForm.reset();
        loginBtn.click(); // Cambiar a login
      } else {
        // Login
        if(!correo || !password) {
          message.textContent = 'Por favor ingresa correo y contraseña.';
          return;
        }

        const savedUser = localStorage.getItem(correo);
        if(!savedUser) {
          message.textContent = 'Correo no registrado.';
          return;
        }

        const userObj = JSON.parse(savedUser);
        if(userObj.password !== password) {
          message.textContent = 'Contraseña incorrecta.';
          return;
        }

        // Login exitoso: mostrar popup modal con bienvenida
        welcomeText.textContent = `¡Bienvenido, ${userObj.nombre || 'usuario'}!`;
        welcomeModal.style.display = 'flex';

        userForm.reset();
        message.textContent = '';
      }
    };

    // Cerrar popup al hacer clic en botón
    closeModalBtn.onclick = () => {
      welcomeModal.style.display = 'none';
    };

    // Inicializar en modo login
    loginBtn.click();
  </script>
  <script src="ScriptMain.js"></script>
</body>
</html>
